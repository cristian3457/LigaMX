<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calendario Liga MX</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.min.js" integrity="sha384-Rx+T1VzGupg4BHQYs2gCW9It+akI2MM/mndMCy36UVfodzcJcF0GGLxZIzObiEfa" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <head>
<style>
    *{
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }
    .navbar1{
        overflow: hidden;
        background-color: black;
    }
    .item-navbar{
        float: left;
        display: block;
        color: white;
        text-align: center;
        padding: 10px 15px;
        text-decoration: none;
    }
    .navbar1 a:hover{
        color:black !important;
        background-color: white;
    }
    .icono{
        display: block;
    }
/* .elemento-padre:hover .dropdown-menu {
    display: block;
} */
@media screen and (max-width:576px) {
    .navbar1 a{
        width: 100%;
    }
    .elemento-padre:hover .dropdown-menu {
        display: none;
    }
}
.visible{
    display: none;
    color: white;
    background-color: black;
    position: absolute;
    top: 65px;
    width: 100%;
}
.padre-menu:hover .visible{
    display: block;
}
.item-desplegable{
    display: block;
    text-decoration: none;
    text-align: center;
    padding: 10px 12px;
    overflow: hidden;
}
ol, ul {
    padding-left: 0px !important;
}
.item-desplegable:hover{
cursor: pointer;
background-color: white;
color: black;

}
.tabs{
    cursor: pointer;
}
</style>
<body>
    <div class="navbar1">
        <a href="home.html" id="home" class="item-navbar">
            <i class="bi bi-house-fill icono" ></i>
            Home
        </a>
        <a href="equipos.html" id="equipos" class="item-navbar">
            <i class="bi bi-shield-fill-plus icono" ></i>
            Equipos
        </a>
        <a class="item-navbar" href="jugadores.html">
            <i class="bi bi-person-lines-fill icono"></i>
            Jugadores
        </a>
        <a class="item-navbar" href="jornadas.html">
            <i class="bi bi-calendar3 icono"></i>
            Jornadas
        </a>
        <a class="item-navbar" href="posiciones.html">
            <i class="bi bi-table icono"></i>
            Posiciones
        </a>
        <a class="item-navbar" href="uniformes.html">
            <i class="bi bi-shop icono"></i>
            Jersys
        </a>
        <div class="elemento-padre">
            <a class="item-navbar dropdown-toggle" id="perfil" href="#" style="float: right;" role="button" data-bs-toggle="dropdown" aria-expanded="true">
                <i class="bi bi-person-circle icono"></i>
                Perfil
            </a>
            <ul class="dropdown-menu text-center" id="perfil-dropdown" data-popper-escaped="" data-popper-placement="bottom-end" style="position: absolute; inset: 0px 0px auto auto; margin: 0px; transform: translate(0px, 70px);">
                <li><a class="dropdown-item" href="#">Mi Informaci√≥n <i class="bi bi-info-circle-fill"></i></a></li>
                <li><hr class="dropdown-divider"></li>
                <li><a class="dropdown-item" href="login.html">Logout  <i class="bi bi-box-arrow-right"></i></a></li>
            </ul>
        </div>


        
    </div>

    <div class="container border border-success-subtle p-3 mt-3 mb-3 rounded-2">
        <h1 class="text-success text-center text-uppercase">Calendario Liga MX</h1>
    </div>
    <div class="container collapse-show mt-3" id="listTable">
        <div class="my-3">
            <label class="form-label d-inline-block me-3 fw-semibold">MOSTRAR LA JORNADA</label>
            <select class="form-select d-inline-block" style="width: auto !important;" id="showEntries">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10</option>
                <option value="11">11</option>
                <option value="12">12</option>
                <option value="13">13</option>
                <option value="14">14</option>
                <option value="15">15</option>
                <option value="16">16</option>
                <option value="17">17</option>
            </select>
        </div>
        <table class="table table-bordered" id="tablaEquipos">
            <thead class="table-dark text-center">
              <tr id="headerTabla">
                <th scope="col">#</th>
                <th scope="col">Partido</th>
                <th scope="col">Fecha</th>
                <th scope="col">Horario</th>
                <th scope="col">Estadio</th>
                <th scope="col">Imagen Partido</th>
              </tr>
            </thead>
            <tbody>
            </tbody>
          </table>
          <nav aria-label="Page navigation example">
            <ul class="pagination" id="pagination">

            </ul>
          </nav>
    </div>
    
</body>
<script>
    const TABLAEQUIPOS = document.getElementById('tablaEquipos');
    const CUERPOTABLA = TABLAEQUIPOS.getElementsByTagName('tbody')[0];
    const SHOWENTRIES = document.getElementById('showEntries');
    let numeroJornada = 1;

    
    SHOWENTRIES.addEventListener('change',function(){
        numeroJornada = SHOWENTRIES.value;
        pintarTabla(numeroJornada);
    });

    async function obtenerDatos(jornada) {
        try {
            const resultado = await fetch(`https://www.thesportsdb.com/api/v1/json/3/eventsround.php?id=4350&r=${jornada}&s=2023-2024`);
            if (!resultado.ok) {
            throw new Error('La solicitud no fue exitosa');
            }
            const datos = await resultado.json();
            return datos.events;
        } catch (error) {
            throw new Error('Ocurrio el siguiente error:', error);
        }
    }
    function pintarTabla (numeroJornada = 1){
        CUERPOTABLA.innerHTML = '';
        const HEADERTABLA = document.getElementById('headerTabla');
        let contadorHeader = 0;
            obtenerDatos(numeroJornada).then(data => {
                const LongitudData = data.length;
                let estatusPartido = "";
                for (let contador = 0; contador < LongitudData; contador++) {
                    var fila = document.createElement('tr');
                    var columna1 = document.createElement('td');
                    var columna2 = document.createElement('td');
                    var columna3 = document.createElement('td');
                    var columna4 = document.createElement('td');
                    var columna5 = document.createElement('td');
                    var columna6 = document.createElement('td');
                    estatusPartido = data[contador]['strStatus'];
                    const IMAGENPARTIDO = document.createElement('img');
                    IMAGENPARTIDO.src = data[contador]['strThumb'];
                    IMAGENPARTIDO.alt = 'Imagen del partido';
                    IMAGENPARTIDO.style.width = '60px';
                    columna1.textContent = contador + 1;
                    columna2.textContent = data[contador]['strEvent'];
                    columna3.textContent = data[contador]['dateEvent'];
                    columna4.textContent = data[contador]['strTimeLocal'];
                    columna5.textContent = data[contador]['strVenue'];
                    columna6.appendChild(IMAGENPARTIDO);

                    fila.appendChild(columna1);
                    fila.appendChild(columna2);
                    fila.appendChild(columna3);
                    fila.appendChild(columna4);
                    fila.appendChild(columna5);
                    fila.appendChild(columna6);

                    if (estatusPartido == 'Match Finished'){
                        if(contadorHeader == 0){
                            var th = document.createElement('th');
                            th.textContent = 'Resultado del partido';
                            th.id = 'resultado';
                            HEADERTABLA.appendChild(th);
                            contadorHeader = 1;
                        }
                        var columna7 = document.createElement('td');
                        columna7.textContent = data[contador]['strHomeTeam'] + " " + data[contador]['intHomeScore'] + " - " + data[contador]['strAwayTeam'] + " " + data[contador]['intAwayScore'];
                        fila.appendChild(columna7);
                    }
                    if(estatusPartido == 'Not Started' && contadorHeader == 0){
                        const THRESULTADO = document.getElementById('resultado');
                        if(THRESULTADO != null )
                            THRESULTADO.remove();
                        contadorHeader = 1;
                    }
                    CUERPOTABLA.appendChild(fila);
                }
                
            });
    }
    
    window.onload=function(){
        // OMDb API
// https://www.thesportsdb.com/api.php
        // https://www.thesportsdb.com/api/v1/json/3/search_all_teams.php?l=Mexican%20Primera%20League
        pintarTabla();

    };
</script>
</html>

